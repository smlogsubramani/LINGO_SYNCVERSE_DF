"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.VerifyService = void 0;
const config_1 = require("../../../config");
const Request_1 = require("../../../core/Request");
const LoggerService_1 = require("../Logger/LoggerService");
class VerifyService {
    constructor(appId, tenantId, appEnvironmentCODE) {
        this.tenantId = tenantId;
        this.appId = appId;
        this.appEnvironmentCODE = appEnvironmentCODE;
    }
    setUserToken(token) {
        this.headers = { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` };
        const decodedData = JSON.parse(atob(token.split('.')[1]));
        this.userId = parseInt(decodedData === null || decodedData === void 0 ? void 0 : decodedData.userId, 0);
        this.tenantId = parseInt(decodedData === null || decodedData === void 0 ? void 0 : decodedData.TenantID, 0);
    }
    async IsEmailVerfied(emailAddress) {
        LoggerService_1.LoggerService.Logger.info("Validate Email Address " + emailAddress);
        return (0, Request_1.request)(config_1.SdkConfig, {
            method: 'POST',
            url: config_1.SdkConfig.ServiceConfig.VerifyService.IsEmailVerified,
            body: emailAddress,
            mediaType: 'application/json',
            headers: this.headers
        });
    }
    async ReVerifyEmail(requestBody) {
        LoggerService_1.LoggerService.Logger.info("ReVerify Email " + requestBody);
        return (0, Request_1.request)(config_1.SdkConfig, {
            method: 'POST',
            url: config_1.SdkConfig.ServiceConfig.VerifyService.ReVerify,
            body: requestBody,
            mediaType: 'application/json',
            headers: this.headers
        });
    }
    async Verify(token) {
        LoggerService_1.LoggerService.Logger.info("Verify Email " + token);
        return (0, Request_1.request)(config_1.SdkConfig, {
            method: 'POST',
            url: config_1.SdkConfig.ServiceConfig.VerifyService.Verify,
            body: JSON.stringify(token),
            mediaType: 'application/json',
            headers: this.headers
        });
    }
}
exports.VerifyService = VerifyService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVmVyaWZ5U2VydmljZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uL3NyYy9saWIvc2VydmljZXMvVmVyaWZ5L1ZlcmlmeVNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNENBQTRDO0FBQzVDLG1EQUFnRDtBQUloRCwyREFBd0Q7QUFFeEQsTUFBYSxhQUFhO0lBTXRCLFlBQVksS0FBYSxFQUFFLFFBQWdCLEVBQUUsa0JBQTBCO1FBQ25FLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFBO1FBQ3hCLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFBO1FBQ2xCLElBQUksQ0FBQyxrQkFBa0IsR0FBRyxrQkFBa0IsQ0FBQTtJQUNoRCxDQUFDO0lBRU0sWUFBWSxDQUFDLEtBQWE7UUFDN0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxlQUFlLEVBQUUsVUFBVSxLQUFLLEVBQUUsRUFBRSxDQUFBO1FBQ3pGLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3pELElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsV0FBVyxhQUFYLFdBQVcsdUJBQVgsV0FBVyxDQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0lBRU0sS0FBSyxDQUFDLGNBQWMsQ0FBQyxZQUFvQjtRQUM1Qyw2QkFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMseUJBQXlCLEdBQUcsWUFBWSxDQUFDLENBQUE7UUFFbkUsT0FBTyxJQUFBLGlCQUFPLEVBQUMsa0JBQVMsRUFBRTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxrQkFBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsZUFBZTtZQUMxRCxJQUFJLEVBQUUsWUFBWTtZQUNsQixTQUFTLEVBQUUsa0JBQWtCO1lBQzdCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztTQUN4QixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sS0FBSyxDQUFDLGFBQWEsQ0FBQyxXQUF1QztRQUM5RCw2QkFBYSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsaUJBQWlCLEdBQUcsV0FBVyxDQUFDLENBQUE7UUFFMUQsT0FBTyxJQUFBLGlCQUFPLEVBQUMsa0JBQVMsRUFBRTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxrQkFBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsUUFBUTtZQUNuRCxJQUFJLEVBQUUsV0FBVztZQUNqQixTQUFTLEVBQUUsa0JBQWtCO1lBQzdCLE9BQU8sRUFBRSxJQUFJLENBQUMsT0FBTztTQUN4QixDQUFDLENBQUM7SUFDUCxDQUFDO0lBRU0sS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFjO1FBQzlCLDZCQUFhLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxlQUFlLEdBQUcsS0FBSyxDQUFDLENBQUE7UUFFbEQsT0FBTyxJQUFBLGlCQUFPLEVBQUMsa0JBQVMsRUFBRTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxrQkFBUyxDQUFDLGFBQWEsQ0FBQyxhQUFhLENBQUMsTUFBTTtZQUNqRCxJQUFJLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBRSxLQUFLLENBQUU7WUFDN0IsU0FBUyxFQUFFLGtCQUFrQjtZQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87U0FDeEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUVKO0FBdkRELHNDQXVEQyJ9