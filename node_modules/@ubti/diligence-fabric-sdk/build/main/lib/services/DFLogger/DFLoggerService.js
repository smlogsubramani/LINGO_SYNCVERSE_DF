"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DFLoggerService = void 0;
const config_1 = require("../../../config");
const Request_1 = require("../../../core/Request");
class DFLoggerService {
    constructor(appId, tenantId) {
        this.headers = {};
        this.userId = 0;
        this.tenantId = 0;
        this.tenantId = tenantId;
        this.appId = appId;
    }
    setUserToken(token) {
        this.headers = { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` };
        const decodedData = JSON.parse(atob(token.split('.')[1]));
        this.userId = parseInt(decodedData === null || decodedData === void 0 ? void 0 : decodedData.userId, 0);
        this.tenantId = parseInt(decodedData === null || decodedData === void 0 ? void 0 : decodedData.TenantID, 0);
    }
    /**
     * creates log in df.
     * @param requestBody The log request parameters.
     * @returns The log inserted success message or returns bad request
     */
    log(logLevel, callingFunction, dynmcFieldsJSON) {
        const url = config_1.SdkConfig.ServiceConfig.DFLoggerService.CREATE;
        const requestBody = {
            logLevel: logLevel,
            logTypeCODE: 'MSGLOG',
            callingFunction: callingFunction,
            dynmcFieldsJSON: dynmcFieldsJSON,
            AppID: this.appId,
            TenantID: this.tenantId
        };
        return (0, Request_1.request)(config_1.SdkConfig, {
            method: 'POST',
            url: url,
            body: requestBody,
            mediaType: 'application/json',
            headers: this.headers,
        });
    }
}
exports.DFLoggerService = DFLoggerService;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiREZMb2dnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ERkxvZ2dlci9ERkxvZ2dlclNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsNENBQTRDO0FBRTVDLG1EQUFnRDtBQUtoRCxNQUFhLGVBQWU7SUFNeEIsWUFBWSxLQUFhLEVBQUUsUUFBZ0I7UUFMbkMsWUFBTyxHQUEyQixFQUFFLENBQUM7UUFDckMsV0FBTSxHQUFHLENBQUMsQ0FBQztRQUNYLGFBQVEsR0FBRyxDQUFDLENBQUM7UUFJakIsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUE7UUFDeEIsSUFBSSxDQUFDLEtBQUssR0FBRyxLQUFLLENBQUE7SUFDdEIsQ0FBQztJQUVNLFlBQVksQ0FBQyxLQUFhO1FBQzdCLElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBRSxjQUFjLEVBQUUsa0JBQWtCLEVBQUUsZUFBZSxFQUFFLFVBQVUsS0FBSyxFQUFFLEVBQUUsQ0FBQTtRQUN6RixNQUFNLFdBQVcsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQTtRQUN6RCxJQUFJLENBQUMsTUFBTSxHQUFHLFFBQVEsQ0FBQyxXQUFXLGFBQVgsV0FBVyx1QkFBWCxXQUFXLENBQUUsTUFBTSxFQUFFLENBQUMsQ0FBQyxDQUFBO1FBQzlDLElBQUksQ0FBQyxRQUFRLEdBQUcsUUFBUSxDQUFDLFdBQVcsYUFBWCxXQUFXLHVCQUFYLFdBQVcsQ0FBRSxRQUFRLEVBQUUsQ0FBQyxDQUFDLENBQUE7SUFDdEQsQ0FBQztJQUVEOzs7O09BSUc7SUFDSSxHQUFHLENBQ04sUUFBZ0IsRUFDaEIsZUFBdUIsRUFDdkIsZUFBdUI7UUFHdkIsTUFBTSxHQUFHLEdBQUksa0JBQVMsQ0FBQyxhQUFhLENBQUMsZUFBZSxDQUFDLE1BQU0sQ0FBQTtRQUUzRCxNQUFNLFdBQVcsR0FBZ0I7WUFDN0IsUUFBUSxFQUFFLFFBQVE7WUFDbEIsV0FBVyxFQUFHLFFBQVE7WUFDdEIsZUFBZSxFQUFFLGVBQWU7WUFDaEMsZUFBZSxFQUFFLGVBQWU7WUFDaEMsS0FBSyxFQUFHLElBQUksQ0FBQyxLQUFLO1lBQ2xCLFFBQVEsRUFBRyxJQUFJLENBQUMsUUFBUTtTQUMzQixDQUFBO1FBRUQsT0FBTyxJQUFBLGlCQUFPLEVBQUMsa0JBQVMsRUFBRTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxHQUFHO1lBQ1IsSUFBSSxFQUFFLFdBQVc7WUFDakIsU0FBUyxFQUFFLGtCQUFrQjtZQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87U0FDeEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUVKO0FBakRELDBDQWlEQyJ9