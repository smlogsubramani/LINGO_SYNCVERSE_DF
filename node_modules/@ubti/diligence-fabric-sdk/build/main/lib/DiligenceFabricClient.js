"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.DiligenceFabricClient = void 0;
const ApplicationService_1 = require("./services/Application/ApplicationService");
const AppRoleService_1 = require("./services/Application/AppRole/AppRoleService");
const AppMenuService_1 = require("./services/Application/AppMenu/AppMenuService");
const UserService_1 = require("./services/User/UserService");
const AuthService_1 = require("./services/Auth/AuthService");
const config_1 = require("../config");
const AuthenticationTypeService_1 = require("./services/AuthenticationType/AuthenticationTypeService");
const DFLoggerService_1 = require("./services/DFLogger/DFLoggerService");
const VerifyService_1 = require("./services/Verify/VerifyService");
// eslint-disable-next-line functional/no-class
class DiligenceFabricClient {
    constructor(config) {
        this.userToken = null;
        // Load configs
        this.userConfig = (0, config_1.configure)(config);
        // Initialize the service objects
        this.appId = this.userConfig.appId;
        this.tenantId = this.userConfig.tenantId;
        this.appEnvironmentCODE = this.userConfig.appEnvironmentCODE;
        this.menuService = new AppMenuService_1.MenuService(this.appId, this.tenantId);
        this.authService = new AuthService_1.AuthService(this.appId, this.tenantId, this.appEnvironmentCODE);
        this.applicationService = new ApplicationService_1.ApplicationService(this.appId, this.tenantId);
        this.userService = new UserService_1.UserService(this.appId, this.tenantId);
        this.applicationRoleService = new AppRoleService_1.ApplicationRoleService(this.appId, this.tenantId, this.appEnvironmentCODE);
        this.authenticationTypeService = new AuthenticationTypeService_1.AuthenticationTypeService(this.appId, this.tenantId);
        this.dfLoggerService = new DFLoggerService_1.DFLoggerService(this.appId, this.tenantId);
        this.verifyService = new VerifyService_1.VerifyService(this.appId, this.tenantId, this.appEnvironmentCODE);
    }
    setAuthUser(authUser) {
        this.userToken = authUser.Token;
    }
    getUserToken() {
        if (!this.userToken) {
            throw new Error('User token not set. Please call setAuthUser() first.');
        }
        return this.userToken;
    }
    getDFLoggerService() {
        try {
            this.dfLoggerService.setUserToken(this.getUserToken());
        }
        catch (ex) {
            console.log(ex);
        }
        return this.dfLoggerService;
    }
    getAuthenticationTypeService() {
        return this.authenticationTypeService;
    }
    getApplicationService() {
        this.applicationService.setUserToken(this.getUserToken());
        return this.applicationService;
    }
    getUserService() {
        this.userService.setUserToken(this.getUserToken());
        return this.userService;
    }
    getMenuService() {
        this.menuService.setUserToken(this.getUserToken());
        return this.menuService;
    }
    getApplicationRoleService() {
        this.applicationRoleService.setUserToken(this.getUserToken());
        return this.applicationRoleService;
    }
    getAuthService() {
        try {
            this.authService.setUserToken(this.getUserToken());
        }
        catch (ex) {
            console.log(ex);
        }
        return this.authService;
    }
    getVerifyService() {
        try {
            this.verifyService.setUserToken(this.getUserToken());
        }
        catch (ex) {
            console.log(ex);
        }
        return this.verifyService;
    }
}
exports.DiligenceFabricClient = DiligenceFabricClient;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRGlsaWdlbmNlRmFicmljQ2xpZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vc3JjL2xpYi9EaWxpZ2VuY2VGYWJyaWNDbGllbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBQUEsa0ZBQStFO0FBQy9FLGtGQUF1RjtBQUN2RixrRkFBNEU7QUFDNUUsNkRBQTBEO0FBQzFELDZEQUEwRDtBQUUxRCxzQ0FBcUM7QUFFckMsdUdBQW9HO0FBR3BHLHlFQUFzRTtBQUN0RSxtRUFBZ0U7QUFDaEUsK0NBQStDO0FBQy9DLE1BQWEscUJBQXFCO0lBZTlCLFlBQVksTUFBWTtRQVJoQixjQUFTLEdBQWtCLElBQUksQ0FBQztRQVNwQyxlQUFlO1FBQ2YsSUFBSSxDQUFDLFVBQVUsR0FBRyxJQUFBLGtCQUFTLEVBQUMsTUFBTSxDQUFDLENBQUM7UUFDcEMsaUNBQWlDO1FBQ2pDLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUM7UUFDbkMsSUFBSSxDQUFDLFFBQVEsR0FBRyxJQUFJLENBQUMsVUFBVSxDQUFDLFFBQVEsQ0FBQztRQUN6QyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDLFVBQVUsQ0FBQyxrQkFBa0IsQ0FBQTtRQUM1RCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUksNEJBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUM5RCxJQUFJLENBQUMsV0FBVyxHQUFHLElBQUkseUJBQVcsQ0FBQyxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLEVBQUUsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7UUFDdkYsSUFBSSxDQUFDLGtCQUFrQixHQUFHLElBQUksdUNBQWtCLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUM7UUFDNUUsSUFBSSxDQUFDLFdBQVcsR0FBRyxJ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