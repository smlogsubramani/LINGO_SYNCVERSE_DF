# DiligenceFabricClient SDK

<div align="center">

![TypeScript](https://img.shields.io/badge/TypeScript-%23323330.svg?style=for-the-badge&logo=typescript&logoColor=%23F7DF1E)
![CSS3](https://img.shields.io/badge/NPM-%231572B6.svg?style=for-the-badge&logo=npm)

[![Version npm](https://img.shields.io/npm/v/@ubti/diligence-fabric-sdk.svg?style=flat-square)](https://www.npmjs.com/package/@ubti/diligence-fabric-sdk)
[![npm Downloads](https://img.shields.io/npm/dm/@ubti/diligence-fabric-sdk.svg?style=flat-square)](https://npmcharts.com/compare/@ubti/diligence-fabric-sdk?minimal=true)

[![NPM](https://nodei.co/npm/@ubti/diligence-fabric-sdk.svg?downloads=true&downloadRank=true)](https://nodei.co/npm/@ubti/diligence-fabric-sdk/)

</div>

The DiligenceFabricClient SDK provides a client library for interacting with the DiligenceFabric API. This README document will guide you through the installation process, usage instructions, error handling, and provide sample code for using the SDK.

## Table of Contents

- [Installation](#installation)
- [Usage](#usage)
- [Error Handling](#error-handling)
- [Examples](#examples)
- [License](#license)

## Installation

You can install the DiligenceFabricClient SDK using npm or yarn:

```shell
npm install @ubti/diligence-fabric-sdk
```

## Usage

To use the DiligenceFabricClient SDK, follow the steps below:

1. Import the necessary classes from the SDK

   ```ts
   import { DiligenceFabricClient, UserInfo } from 'diligence-fabric-sdk';
   ```

2. Setup the configuration using `.env `

    >Note: You can refer `env.sample`
    ```sh
    # Required
    DF_TENANT_ID=
    DF_APP_ID=
    # Optional
    DF_API_URL=
    DF_API_VERSION=
    ```

3. Create an instance of the DiligenceFabricClient class

   ```ts
   /* Please get the above config from environment variables based on the technology that you use like dotenv, etc.. Its the most recommended way */
   
   const client = new DiligenceFabricClient();
   ```

   with configuration via JSON

   ```json
  {
    "DF_APP_ID": ,
    "DF_TENANT_ID": ,
    "DF_API_URL": "",
    "DF_API_VERSION": ""
  }

   ```

  ```ts
   /* Please get the above config from environment variables based on the technology that you use like dotenv, etc.. Its the most recommended way */

   import config from '../default.json'
   
   const client = new DiligenceFabricClient(config);
   ```

4. Set the authenticated user token

   a. You can use the AuthService to login and getToken

   ```ts
   const resp = client.getAuthService().login("**your auth request model**)
   ```

   b. Now get the access token from the response and set token in the SDK

   ```ts
   const authUser = {
     Token: 'your_auth_token',
   };
   client.setAuthUser(authUser);
   ```

5. Access the services and perform actions

   ```ts
   const applicationService = client.getApplicationService();
   // Use the applicationService to interact with the Application service

   const userService = client.getUserService();
   // Use the userService to interact with the User service

   const menuService = client.getMenuService();
   // Use the menuService to interact with the Menu service

   const authService = client.getAuthService();
   // Use the authService for authentication-related operations
   ```

> Note: Ensure that you have set the authenticated user token using **setAuthUser()** before accessing the services.

## Error Handling

If the user token is not set before accessing the services, an error will be thrown. To handle this error, wrap the code in a try-catch block:

```ts
try {
  // Access the services and perform actions here
} catch (error) {
  // Handle the error here
  console.error('Error:', error);
}
```

## Examples

Here are some samples of the DiligenceFabricClient SDK:

1. Authentication

   ```ts
   const authService = client.getAuthService();

   try {
     const loginResponse = await authService.login();
     console.log('Auth Response:', loginResponse);
   } catch (error) {
     console.error('Error in Login:', error);
   }
   ```

2. Get All application menu based on the user token

   ```ts
   const appRoleService = client.getApplicationRoleService();

   try {
     const response = await appRoleService.getAllAppMenus();
     console.log('Response:', loginResponse);
   } catch (error) {
     console.error('Error in Getting All App Menus:', error);
   }
   ```

Feel free to explore the SDK and its available methods to suit your specific use cases.

## To publish to NPM registry

Use the following command

```sh
npm publish @ubti/diligence-fabric-sdk --access=public
```

## Give a Star! :star:

If you liked the project or if this project helped you, please **give a star**. And also please **fork** this repository and send us **pull-requests**. If you find any problem please open **issue**.

> Did the sample not work for you as expected? Did you encounter issues trying this sample? Then please reach out to us using the [GitHub Issues](../../issues) page.

## Feedback

If you have any feedback, please reach out to us at nanthakumar.j@ubtiinc.com

<div style="background-color: white">

![Logo](https://149510500.v2.pressablecdn.com/wp-content/uploads/2020/11/UBTI-Logo_Secondary-02.png)

</div>
