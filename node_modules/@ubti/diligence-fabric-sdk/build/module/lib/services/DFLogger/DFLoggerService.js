import { SdkConfig } from "../../../config";
import { request } from "../../../core/Request";
export class DFLoggerService {
    headers = {};
    userId = 0;
    tenantId = 0;
    appId;
    constructor(appId, tenantId) {
        this.tenantId = tenantId;
        this.appId = appId;
    }
    setUserToken(token) {
        this.headers = { 'Content-Type': 'application/json', 'Authorization': `Bearer ${token}` };
        const decodedData = JSON.parse(atob(token.split('.')[1]));
        this.userId = parseInt(decodedData?.userId, 0);
        this.tenantId = parseInt(decodedData?.TenantID, 0);
    }
    /**
     * creates log in df.
     * @param requestBody The log request parameters.
     * @returns The log inserted success message or returns bad request
     */
    log(logLevel, callingFunction, dynmcFieldsJSON) {
        const url = SdkConfig.ServiceConfig.DFLoggerService.CREATE;
        const requestBody = {
            logLevel: logLevel,
            logTypeCODE: 'MSGLOG',
            callingFunction: callingFunction,
            dynmcFieldsJSON: dynmcFieldsJSON,
            AppID: this.appId,
            TenantID: this.tenantId
        };
        return request(SdkConfig, {
            method: 'POST',
            url: url,
            body: requestBody,
            mediaType: 'application/json',
            headers: this.headers,
        });
    }
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiREZMb2dnZXJTZXJ2aWNlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vc3JjL2xpYi9zZXJ2aWNlcy9ERkxvZ2dlci9ERkxvZ2dlclNlcnZpY2UudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGlCQUFpQixDQUFDO0FBRTVDLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUtoRCxNQUFNLE9BQU8sZUFBZTtJQUNoQixPQUFPLEdBQTJCLEVBQUUsQ0FBQztJQUNyQyxNQUFNLEdBQUcsQ0FBQyxDQUFDO0lBQ1gsUUFBUSxHQUFHLENBQUMsQ0FBQztJQUNiLEtBQUssQ0FBUztJQUV0QixZQUFZLEtBQWEsRUFBRSxRQUFnQjtRQUN2QyxJQUFJLENBQUMsUUFBUSxHQUFHLFFBQVEsQ0FBQTtRQUN4QixJQUFJLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQTtJQUN0QixDQUFDO0lBRU0sWUFBWSxDQUFDLEtBQWE7UUFDN0IsSUFBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLGNBQWMsRUFBRSxrQkFBa0IsRUFBRSxlQUFlLEVBQUUsVUFBVSxLQUFLLEVBQUUsRUFBRSxDQUFBO1FBQ3pGLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFBO1FBQ3pELElBQUksQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLFdBQVcsRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDLENBQUE7UUFDOUMsSUFBSSxDQUFDLFFBQVEsR0FBRyxRQUFRLENBQUMsV0FBVyxFQUFFLFFBQVEsRUFBRSxDQUFDLENBQUMsQ0FBQTtJQUN0RCxDQUFDO0lBRUQ7Ozs7T0FJRztJQUNJLEdBQUcsQ0FDTixRQUFnQixFQUNoQixlQUF1QixFQUN2QixlQUF1QjtRQUd2QixNQUFNLEdBQUcsR0FBSSxTQUFTLENBQUMsYUFBYSxDQUFDLGVBQWUsQ0FBQyxNQUFNLENBQUE7UUFFM0QsTUFBTSxXQUFXLEdBQWdCO1lBQzdCLFFBQVEsRUFBRSxRQUFRO1lBQ2xCLFdBQVcsRUFBRyxRQUFRO1lBQ3RCLGVBQWUsRUFBRSxlQUFlO1lBQ2hDLGVBQWUsRUFBRSxlQUFlO1lBQ2hDLEtBQUssRUFBRyxJQUFJLENBQUMsS0FBSztZQUNsQixRQUFRLEVBQUcsSUFBSSxDQUFDLFFBQVE7U0FDM0IsQ0FBQTtRQUVELE9BQU8sT0FBTyxDQUFDLFNBQVMsRUFBRTtZQUN0QixNQUFNLEVBQUUsTUFBTTtZQUNkLEdBQUcsRUFBRSxHQUFHO1lBQ1IsSUFBSSxFQUFFLFdBQVc7WUFDakIsU0FBUyxFQUFFLGtCQUFrQjtZQUM3QixPQUFPLEVBQUUsSUFBSSxDQUFDLE9BQU87U0FDeEIsQ0FBQyxDQUFDO0lBQ1AsQ0FBQztDQUVKIn0=